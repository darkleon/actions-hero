name: Create a comment on new issue

on:
  issues:
    types:
      - "opened"

jobs:
  comment_with_action:
    runs-on: ubuntu-latest
    steps:
      - name: "dump github contex"
        run: echo '${{ toJson(github.event) }}' | jq
        shell: bash
      - name: Update PR with test results
        uses: edumserrano/find-create-or-update-comment@v1
        with:
          issue-number: ${{ github.event.pull_request.number }}
          body-includes: '<!-- pr-test-results -->'
          comment-author: 'github-actions[bot]'
          body: | # can be a single value or you can compose text with multi-line values
            <!-- pr-test-results -->
            ${{ steps.test-results.outputs.results }}
          edit-mode: replace